<div class="row">
    <div class="col s9">
        <h4><%- if params[:search].present? %>キーワード: 「<%= params[:search] %>」の<%- end %>質問の一覧</h4>
    </div>
    <div class="input-field col s3">
        <%= form_tag issues_path, method: :get do %>
            <i class="material-icons prefix">search</i>
            <%= text_field_tag :search, '', placeholder: 'キーワードから検索', id: 'search' %>
        <%- end %>
    </div>
</div>

<div class="row">
    <div class="col s12">
        <table class="striped">
            <thead>
                <tr>
                    <th>No</th>
                    <th>質問事項</th>
                    <th>ステータス</th>
                    <th>回答数</th>
                </tr>
            </thead>
            <tbody>
                <%- @issues.each do |issue| %>
                    <tr>
                        <td><%= issue.id %></td>
                        <td><%= link_to issue_path(issue) do %>
                            <%= issue.title %>
                        <%- end %></td>
                        <td><%= issue.issue_state %></td>
                        <td><%= issue.comment_count %></td>
                    </tr>
                <% end %>
            </tbody>
        </table>

        <%= paginate @issues %>
    </div>
</div>

<div class="fixed-action-btn">
    <a class="btn-floating btn-large red">
        <i class="large material-icons">add</i>
    </a>
    <ul>
        <li>
            <%= link_to new_issue_path, class: %(btn-floating green tooltipped), data: { tooltip: '質問を登録' } do %>
                <i class="small material-icons">create</i>
            <% end %>
        </li>
    </ul>
</div>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.fixed-action-btn');
    var instances = M.FloatingActionButton.init(elems, {
        direction: 'top'
    });

    var elems = document.querySelectorAll('.tooltipped');
    var instances = M.Tooltip.init(elems, {
        position: 'left'
    });
});
</script>
